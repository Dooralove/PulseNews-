# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ - –§–ò–ù–ê–õ–¨–ù–û–ï –†–ï–®–ï–ù–ò–ï

## –ù–∞–π–¥–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

Backend –≤–æ–∑–≤—Ä–∞—â–∞–ª **–ø–∞–≥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç**:
```json
{
  "count": 4,
  "next": null,
  "previous": null,
  "results": [
    { "id": 2, "content": "–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π 1", ... },
    { "id": 3, "content": "–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π 2", ... }
  ]
}
```

–ê frontend –æ–∂–∏–¥–∞–ª **–ø—Ä–æ—Å—Ç–æ–π –º–∞—Å—Å–∏–≤**:
```json
[
  { "id": 2, "content": "–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π 1", ... },
  { "id": 3, "content": "–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π 2", ... }
]
```

## –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. Frontend: `frontend/src/services/commentService.ts`

**–ë—ã–ª–æ:**
```typescript
async getComments(articleId: number): Promise<Comment[]> {
  const response = await api.get<Comment[]>(`/articles/${articleId}/comments/`);
  return response.data;
}
```

**–°—Ç–∞–ª–æ:**
```typescript
async getComments(articleId: number): Promise<Comment[]> {
  const response = await api.get(`/articles/${articleId}/comments/`);
  // Backend returns paginated response with 'results' field
  return response.data.results || response.data;
}
```

–¢–µ–ø–µ—Ä—å —Å–µ—Ä–≤–∏—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ –ø–æ–ª–µ `results` –≤ –æ—Ç–≤–µ—Ç–µ, –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –µ–≥–æ. –ï—Å–ª–∏ –Ω–µ—Ç - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∫–∞–∫ –µ—Å—Ç—å.

### 2. Backend: `backend/news/views.py`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```python
class ArticleCommentViewSet(viewsets.ModelViewSet):
    # ...
    pagination_class = None  # Disable pagination for comments
```

–≠—Ç–æ –æ—Ç–∫–ª—é—á–∞–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤, –∏ —Ç–µ–ø–µ—Ä—å API –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –≤–º–µ—Å—Ç–æ –ø–∞–≥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞.

### 3. Backend: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```python
def get_queryset(self):
    article_pk = self.kwargs.get('article_pk')
    queryset = Comment.objects.filter(article_id=article_pk, parent__isnull=True)
    # ...
```

–î–æ–±–∞–≤–ª–µ–Ω —Ñ–∏–ª—å—Ç—Ä `parent__isnull=True` –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ç–æ–ª—å–∫–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è. –û—Ç–≤–µ—Ç—ã –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ –ø–æ–ª–µ `replies` –≤ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä–µ.

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä (Ctrl+C)
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞
python manage.py runserver
```

### 2. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ
```
http://localhost:3000/articles/4
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- ‚úÖ –°—á–µ—Ç—á–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (4)"
- ‚úÖ –ö–∞–∂–¥—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∏–º–µ–µ—Ç –∞–≤—Ç–æ—Ä–∞, –¥–∞—Ç—É –∏ —Ç–µ–∫—Å—Ç
- ‚úÖ –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- ‚úÖ –ù–æ–≤—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å—Ä–∞–∑—É –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
CommentSectionNew: Loading comments for article 4
CommentSectionNew: Raw response: [array of 4 comments]
CommentSectionNew: Is array? true
CommentSectionNew: Number of comments: 4
CommentSectionNew: Rendering with 4 comments
```

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab

–ó–∞–ø—Ä–æ—Å `GET /api/v1/articles/4/comments/` —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å:
```json
[
  {
    "id": 2,
    "article": 4,
    "author": { ... },
    "content": "—Ç–µ–∫—Å—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è",
    "parent": null,
    "replies": [],
    "created_at": "...",
    "is_active": true
  },
  ...
]
```

–ë–µ–∑ –ø–æ–ª–µ–π `count`, `next`, `previous`, `results`.

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í `CommentSectionNew.tsx` –¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
- –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ

–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –≤ –±—É–¥—É—â–µ–º –±—ã—Å—Ç—Ä–æ –Ω–∞—Ö–æ–¥–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã.

### –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–¢–µ–ø–µ—Ä—å —Å–µ—Ä–≤–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–±–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –æ—Ç–≤–µ—Ç–∞:
- –ü–∞–≥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (—Å `results`)
- –ü—Ä–æ—Å—Ç–æ–π –º–∞—Å—Å–∏–≤

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ

1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ñ–∏–ª—å—Ç—Ä `parent__isnull=True` –≤ queryset
2. ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
3. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ –≤ commentService
4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
5. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- [ ] –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å—Ç–∞—Ç—å–∏
- [ ] –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- [ ] –°—á–µ—Ç—á–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ

### –¢–µ—Å—Ç 2: –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
- [ ] –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
- [ ] –ù–∞–∂–∞—Ç—å "–û—Ç–ø—Ä–∞–≤–∏—Ç—å"
- [ ] –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ
- [ ] –ü–æ–ª–µ –≤–≤–æ–¥–∞ –æ—á–∏—â–∞–µ—Ç—Å—è

### –¢–µ—Å—Ç 3: –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
- [ ] –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É —É–¥–∞–ª–µ–Ω–∏—è –Ω–∞ —Å–≤–æ–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- [ ] –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ
- [ ] –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∏—Å—á–µ–∑–∞–µ—Ç –∏–∑ —Å–ø–∏—Å–∫–∞

### –¢–µ—Å—Ç 4: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- [ ] –í—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
- [ ] –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å—Ç–∞—Ç—å–∏
- [ ] –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤–∏–¥–Ω—ã
- [ ] –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É backend –∏ frontend:
- Backend –≤–æ–∑–≤—Ä–∞—â–∞–ª –ø–∞–≥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç
- Frontend –æ–∂–∏–¥–∞–ª –ø—Ä–æ—Å—Ç–æ–π –º–∞—Å—Å–∏–≤

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
1. –û—Ç–∫–ª—é—á–∏–ª–∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—é –Ω–∞ backend
2. –î–æ–±–∞–≤–∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ–±–æ–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –Ω–∞ frontend (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ! üéâ
